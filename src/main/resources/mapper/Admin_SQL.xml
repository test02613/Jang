<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.Admin_SQL">

	<resultMap type="ReviewVO" id="reviewlist">
		<result column="ITEMNUM" property="itemnum" jdbcType="INTEGER"
			javaType="Integer" />
		<result column="REVIEWNUM" property="reviewnum"
			jdbcType="INTEGER" javaType="Integer" />
		<result column="REVIEWTITLE" property="reviewtitle"
			jdbcType="VARCHAR" javaType="String" />
		<result column="REVIEWCONTENT" property="reviewcontent"
			jdbcType="VARCHAR" javaType="String" />
	</resultMap>

	<resultMap type="ItemAttrVO" id="itemAttr">
		<result column="ITEMCOST" property="itemcost"
			jdbcType="INTEGER" javaType="Integer" />
		<result column="ITEMSTOCK" property="itemstock"
			jdbcType="INTEGER" javaType="Integer" />
		<result column="ITEMNAME" property="itemname"
			jdbcType="VARCHAR" javaType="String" />
		<result column="ITEMCOLOR" property="itemcolor"
			jdbcType="VARCHAR" javaType="String" />
	</resultMap>

	<resultMap type="ItemVO" id="item">
		<result column="ITEMNUM" property="itemnum" jdbcType="INTEGER"
			javaType="Integer" />
	</resultMap>

	<resultMap type="OrderVO" id="orderlist">
		<result column="ORDERDATE" property="orderdate"/>
		<result column="ORDERNUM" property="ordernum"/>
		<result column="ID" property="id" />
		<result column="MOBLIE" property="mobile"/>
		<result column="ORDERCOST" property="ordercost"/>
		<result column="NAME" property="name"/>
		<result column="POSTCODE" property="postcode" />
		<result column="ADDRESS" property="address"/>
		<result column="ADDRESSDETAIL" property="addressdetail"/>
		<result column="REVIEW" property="review"/>
		<collection property="itemattrvo" resultMap="itemAttr" />
		<collection property="itemvo" resultMap="item" />
	</resultMap>
	
	<resultMap type="MemberVO" id="memberlist">
		<result column="ID" property="id"/>
		<result column="NAME" property="name"/>
		<result column="ADMIN" property="admin"/>
		<result column="POINT" property="point"/>
		<result column="LEAVE" property="leave"/>
	</resultMap>

	<!-- 회원관리 -->
    <select id="member_list" resultMap="memberlist">
		SELECT *
		FROM MEMBER
	</select>
	
	<!-- 회원 블랙처리시 leave 0->2로 변경 -->
	<update id="member_black" parameterType="MemberVO">
		UPDATE MEMBER 
		SET leave = 2
		WHERE id = #{id}
	</update>
	
	<!-- 주문관리 -->
	<select id="order_admin" resultMap="orderlist">
		SELECT *
		FROM ORDERTABLE a
		JOIN
		ItemAttr b
		on a.itemcode = b.itemcode
	</select>
	
	<!-- 리뷰관리 -->
	<select id="review_admin" resultMap="reviewlist">
		SELECT *
		FROM REVIEW
	</select>



	<!-- 상품 등록 -->
	<insert id ="item_insert">
     INSERT INTO ITEM
     VALUES (
            #{ itemnum }
          , #{ itemname }
          , #{ itemcat2 }
          , NULL
          , NULL
          , #{ itemcat1 }
          , NULL
          , NULL 
          )   
    </insert>
   
   	<!-- 상품 상세 등록 -->
	<insert id ="itemattr_insert">
      INSERT INTO ITEMATTR 
      VALUES(
			  #{ itemnum }
			, #{ itemcode }
			, #{ itemcost }
			, #{ itemstock }
			, #{ itemname }
			, #{ itemcolor }
			, #{ itemgb } 
			)
    </insert>
</mapper>